{"datasets":[{"name":"3de9e092","displayName":"DBR_Support_Matrix","query":"SELECT \n  dbr_version, \n  support_until, \n  CASE \n    WHEN support_until >= CURRENT_DATE THEN TRUE \n    ELSE FALSE \n  END AS is_supported\nFROM VALUES\n  (15.4, DATE('2027-08-19')),\n  (14.3, DATE('2027-02-01')),\n  (13.3, DATE('2026-08-22')),\n  (12.2, DATE('2026-03-01')),\n  (11.3, DATE('2025-10-19')),\n  (10.4, DATE('2025-03-18')),\n  (9.1,  DATE('2024-12-19'))\nAS dbr(dbr_version, support_until);"},{"name":"196e0923","displayName":"DBR_Version_Param","query":"SELECT\n    DISTINCT regexp_extract(dbr_version, '(?<!\\\\d)(\\\\d{1,2}\\\\.\\\\d)(?!\\\\d)', 0) AS dbr_version\n  FROM\n    system.compute.clusters;"},{"name":"965bfd51","displayName":"Workspaces Param","query":" SELECT\n    DISTINCT workspace_id\n  FROM\n    system.billing.usage \n  WHERE\n    billing_origin_product = 'JOBS'\n    AND usage_metadata.node_type != 'SERVERLESS'\n    AND usage_metadata.job_id IS NOT NULL\n    AND usage_date >= CURRENT_DATE - INTERVAL 30 DAYS;"},{"name":"f3d492f2","displayName":"Job_DBR_Version_Spend_Annualized","query":"-- Define supported DBRs and their support expiration\nWITH dbr_support_matrix AS (\n  SELECT * FROM VALUES\n    ('15.4', TRUE, DATE('2027-08-19')),\n    ('14.3', TRUE, DATE('2027-02-01')),\n    ('13.3', TRUE, DATE('2026-08-22')),\n    ('12.2', TRUE, DATE('2026-03-01')),\n    ('11.3', TRUE, DATE('2025-10-19')),\n    ('10.4', TRUE, DATE('2025-03-18')),\n    ('9.1',  TRUE, DATE('2024-12-19'))\n  AS dbr(dbr_version, is_lts, support_until)\n),\n\n-- Filter usage early\nfiltered_usage AS (\n  SELECT\n    u.workspace_id,\n    u.usage_metadata.cluster_id,\n    u.usage_metadata.job_id,\n    u.usage_quantity,\n    u.sku_name\n  FROM\n    system.billing.usage u\n  WHERE\n    u.billing_origin_product = 'JOBS'\n    AND u.usage_metadata.node_type != 'SERVERLESS'\n    AND u.usage_metadata.job_id IS NOT NULL\n    AND u.usage_date BETWEEN :date_range.min AND :date_range.max\n    AND (\n      :workspace_ids = ARRAY('All') OR array_contains(:workspace_ids, u.workspace_id)\n    )\n),\n\n-- Price lookup\nprice_lookup AS (\n  SELECT \n    sku_name,\n    pricing.effective_list.default AS price_per_dbu\n  FROM \n    system.billing.list_prices\n  WHERE price_end_time IS NULL\n),\n\n-- Join with clusters and extract DBR version\nusage_with_dbr AS (\n  SELECT\n    fu.workspace_id,\n    fu.cluster_id,\n    fu.job_id,\n    fu.usage_quantity,\n    pl.price_per_dbu,\n    regexp_extract(c.dbr_version, '(?<!\\\\d)(\\\\d{1,2}\\\\.\\\\d)(?!\\\\d)', 0) AS dbr_version\n  FROM\n    filtered_usage fu\n  JOIN system.compute.clusters c\n    ON fu.cluster_id = c.cluster_id\n  JOIN price_lookup pl\n    ON fu.sku_name = pl.sku_name\n  WHERE\n    :dbr_versions = ARRAY('All') \n    OR (\n      regexp_extract(c.dbr_version, '(?<!\\\\d)(\\\\d{1,2}\\\\.\\\\d)(?!\\\\d)', 0) IS NOT NULL AND\n      array_contains(:dbr_versions, regexp_extract(c.dbr_version, '(?<!\\\\d)(\\\\d{1,2}\\\\.\\\\d)(?!\\\\d)', 0))\n    )\n),\n\n-- Aggregate usage per DBR version\naggregated_data AS (\n  SELECT\n    u.dbr_version,\n    COUNT(DISTINCT u.job_id) AS job_count,\n    SUM(u.usage_quantity) AS total_dbu_spend,\n    SUM(u.usage_quantity * u.price_per_dbu) AS total_cost,\n    MAX(COALESCE(ds.is_lts, FALSE)) AS is_lts,\n    MAX(CASE\n      WHEN ds.support_until IS NOT NULL AND CURRENT_DATE <= ds.support_until THEN TRUE\n      ELSE FALSE\n    END) AS is_supported\n  FROM\n    usage_with_dbr u\n  LEFT JOIN dbr_support_matrix ds\n    ON u.dbr_version = ds.dbr_version\n  GROUP BY\n    u.dbr_version\n)\n\n-- Final projection\nSELECT \n  dbr_version,\n  is_lts,\n  is_supported,\n  job_count,\n  total_cost AS monthly_cost,\n  total_cost / 30 * 365 AS annualized_cost,\n  total_cost / SUM(total_cost) OVER () AS percentage_spend\nFROM\n  aggregated_data\nORDER BY \n  percentage_spend DESC;","parameters":[{"displayName":"workspace_ids","keyword":"workspace_ids","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"All"}]}}},{"displayName":"dbr_versions","keyword":"dbr_versions","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"All"}]}}},{"displayName":"date_range","keyword":"date_range","dataType":"DATE","complexType":"RANGE","defaultSelection":{"range":{"dataType":"DATE","min":{"value":"2025-04-01T00:00:00.000"},"max":{"value":"2025-04-30T23:59:59.999"}}}}]},{"name":"f708f193","displayName":"Job_Level_Usage_And_Cost_Analysis","query":"-- Define supported DBRs and their support expiration\nWITH dbr_support_matrix AS (\n  SELECT * FROM VALUES\n    ('15.4', TRUE, DATE('2027-08-19')),\n    ('14.3', TRUE, DATE('2027-02-01')),\n    ('13.3', TRUE, DATE('2026-08-22')),\n    ('12.2', TRUE, DATE('2026-03-01')),\n    ('11.3', TRUE, DATE('2025-10-19')),\n    ('10.4', TRUE, DATE('2025-03-18')),\n    ('9.1',  TRUE, DATE('2024-12-19'))\n  AS dbr(dbr_version, is_lts, support_until)\n),\n\n-- Filter and project early\nfiltered_usage AS (\n  SELECT\n    u.workspace_id,\n    u.usage_metadata.cluster_id,\n    u.usage_metadata.job_id,\n    u.usage_quantity,\n    u.identity_metadata.run_as,\n    u.sku_name\n  FROM\n    system.billing.usage u\n  WHERE\n    u.billing_origin_product = 'JOBS'\n    AND u.usage_metadata.node_type != 'SERVERLESS'\n    AND u.usage_metadata.job_id IS NOT NULL\n    AND u.usage_date BETWEEN :date_range.min AND :date_range.max\n    AND (:workspace_ids = ARRAY('All') OR array_contains(:workspace_ids, u.workspace_id))\n),\n\n-- Price lookup\nprice_lookup AS (\n  SELECT \n    sku_name,\n    pricing.effective_list.default AS price_per_dbu\n  FROM system.billing.list_prices\n  WHERE price_end_time IS NULL\n),\n\n-- Join with cluster and parse DBR version\nusage_with_dbr AS (\n  SELECT\n    fu.workspace_id,\n    fu.cluster_id,\n    fu.job_id,\n    fu.usage_quantity,\n    fu.run_as,\n    pl.price_per_dbu,\n    regexp_extract(c.dbr_version, '(?<!\\\\d)(\\\\d{1,2}\\\\.\\\\d)(?!\\\\d)', 0) AS dbr_version\n  FROM\n    filtered_usage fu\n  JOIN system.compute.clusters c\n    ON fu.cluster_id = c.cluster_id\n  JOIN price_lookup pl\n    ON fu.sku_name = pl.sku_name\n  WHERE\n    :dbr_versions = ARRAY('All') \n    OR (\n      regexp_extract(c.dbr_version, '(?<!\\\\d)(\\\\d{1,2}\\\\.\\\\d)(?!\\\\d)', 0) IS NOT NULL AND\n      array_contains(:dbr_versions, regexp_extract(c.dbr_version, '(?<!\\\\d)(\\\\d{1,2}\\\\.\\\\d)(?!\\\\d)', 0))\n    )\n),\n\n-- Aggregate per job\njob_data AS (\n  SELECT\n    u.workspace_id,\n    u.job_id,\n    ARRAY_AGG(DISTINCT u.dbr_version) AS dbr_versions,\n    ARRAY_AGG(DISTINCT u.run_as) AS run_identities,\n    SUM(u.usage_quantity * u.price_per_dbu) AS total_cost,\n    MAX(COALESCE(ds.is_lts, FALSE)) AS is_lts,\n    MAX(CASE \n      WHEN ds.dbr_version IS NOT NULL AND CURRENT_DATE <= ds.support_until THEN TRUE\n      ELSE FALSE\n    END) AS is_supported\n  FROM\n    usage_with_dbr u\n  LEFT JOIN dbr_support_matrix ds\n    ON u.dbr_version = ds.dbr_version\n  GROUP BY\n    u.workspace_id, u.job_id\n)\n\n-- Final output\nSELECT \n  workspace_id,\n  job_id,\n  dbr_versions,\n  is_lts,\n  is_supported,\n  run_identities,\n  total_cost\nFROM\n  job_data\nORDER BY \n  total_cost DESC;","parameters":[{"displayName":"workspace_ids","keyword":"workspace_ids","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"All"}]}}},{"displayName":"date_range","keyword":"date_range","dataType":"DATE","complexType":"RANGE","defaultSelection":{"range":{"dataType":"DATE","min":{"value":"2025-04-01T00:00:00.000"},"max":{"value":"2025-04-30T23:59:59.999"}}}},{"displayName":"dbr_versions","keyword":"dbr_versions","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"All"}]}}}]},{"name":"012bb193","displayName":"All_Purpose_DBR_Version_Spend_Annualized","query":"-- Define supported DBRs and their support expiration\nWITH dbr_support_matrix AS (\n  SELECT * FROM VALUES\n    ('15.4', TRUE, DATE('2027-08-19')),\n    ('14.3', TRUE, DATE('2027-02-01')),\n    ('13.3', TRUE, DATE('2026-08-22')),\n    ('12.2', TRUE, DATE('2026-03-01')),\n    ('11.3', TRUE, DATE('2025-10-19')),\n    ('10.4', TRUE, DATE('2025-03-18')),\n    ('9.1',  TRUE, DATE('2024-12-19'))\n  AS dbr(dbr_version, is_lts, support_until)\n),\n\n-- Latest change_time per cluster\nlatest_cluster_versions AS (\n  SELECT\n    cluster_id,\n    MAX(change_time) AS latest_change_time\n  FROM\n    system.compute.clusters\n  GROUP BY cluster_id\n),\n\n-- Only latest metadata per cluster\nlatest_cluster_metadata AS (\n  SELECT\n    c.cluster_id,\n    regexp_extract(c.dbr_version, '(?<!\\\\d)(\\\\d{1,2}\\\\.\\\\d)(?!\\\\d)', 0) AS dbr_version\n  FROM\n    system.compute.clusters c\n  JOIN latest_cluster_versions lcv\n    ON c.cluster_id = lcv.cluster_id\n   AND c.change_time = lcv.latest_change_time\n),\n\n-- Filter usage early\nfiltered_usage AS (\n  SELECT\n    u.workspace_id,\n    u.usage_metadata.cluster_id,\n    u.usage_quantity,\n    u.sku_name\n  FROM\n    system.billing.usage u\n  WHERE\n    u.billing_origin_product = 'ALL_PURPOSE'\n    AND u.usage_metadata.node_type != 'SERVERLESS'\n    AND u.usage_date BETWEEN :date_range.min AND :date_range.max\n    AND (\n      :workspace_ids = ARRAY('All') OR array_contains(:workspace_ids, u.workspace_id)\n    )\n),\n\n-- Pre-filter pricing\nprice_lookup AS (\n  SELECT \n    sku_name,\n    pricing.effective_list.default AS price_per_dbu\n  FROM \n    system.billing.list_prices\n  WHERE price_end_time IS NULL\n),\n\n-- Combine usage with latest DBR only\nusage_with_latest_dbr AS (\n  SELECT\n    fu.workspace_id,\n    fu.cluster_id,\n    fu.usage_quantity,\n    pl.price_per_dbu,\n    lcm.dbr_version\n  FROM\n    filtered_usage fu\n  JOIN price_lookup pl ON fu.sku_name = pl.sku_name\n  JOIN latest_cluster_metadata lcm ON fu.cluster_id = lcm.cluster_id\n),\n\n-- Aggregate by DBR version\naggregated_data AS (\n  SELECT\n    u.dbr_version,\n    COUNT(DISTINCT u.cluster_id) AS cluster_count,\n    SUM(u.usage_quantity) AS total_dbu_spend,\n    SUM(u.usage_quantity * u.price_per_dbu) AS total_cost,\n    MAX(COALESCE(ds.is_lts, FALSE)) AS is_lts,\n    MAX(CASE \n      WHEN ds.support_until IS NOT NULL AND CURRENT_DATE <= ds.support_until THEN TRUE \n      ELSE FALSE \n    END) AS is_supported\n  FROM\n    usage_with_latest_dbr u\n  LEFT JOIN dbr_support_matrix ds ON u.dbr_version = ds.dbr_version\n  GROUP BY u.dbr_version\n),\n\n-- Final filter (optional DBR version filter)\nfinal AS (\n  SELECT \n    dbr_version,\n    is_lts,\n    is_supported,\n    cluster_count,\n    total_cost,\n    total_cost / 30 * 365 AS annualized_cost\n  FROM aggregated_data\n  WHERE\n    :dbr_versions = ARRAY('All') \n    OR array_contains(:dbr_versions, dbr_version)\n)\n\n-- Final output with percentage contribution\nSELECT\n  *,\n  total_cost / SUM(total_cost) OVER () AS percentage_spend\nFROM final\nORDER BY percentage_spend DESC;\n\n","parameters":[{"displayName":"workspace_ids","keyword":"workspace_ids","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"All"}]}}},{"displayName":"dbr_versions","keyword":"dbr_versions","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"All"}]}}},{"displayName":"date_range","keyword":"date_range","dataType":"DATE","complexType":"RANGE","defaultSelection":{"range":{"dataType":"DATE","min":{"value":"2025-04-01T00:00:00.000"},"max":{"value":"2025-04-30T23:59:59.999"}}}}]},{"name":"9b35fba1","displayName":"All_Purpose_Usage_And_Cost_Analysis","query":"-- Define supported DBRs and their support expiration\nWITH dbr_support_matrix AS (\n  SELECT * FROM VALUES\n    (15.4, TRUE, DATE('2027-08-19')),\n    (14.3, TRUE, DATE('2027-02-01')),\n    (13.3, TRUE, DATE('2026-08-22')),\n    (12.2, TRUE, DATE('2026-03-01')),\n    (11.3, TRUE, DATE('2025-10-19')),\n    (10.4, TRUE, DATE('2025-03-18')),\n    (9.1,  TRUE, DATE('2024-12-19'))\n  AS dbr(dbr_version, is_lts, support_until)\n),\n\nlatest_cluster_versions AS (\n  SELECT\n    cluster_id,\n    MAX(change_time) AS latest_change_time\n  FROM\n    system.compute.clusters\n  GROUP BY\n    cluster_id\n),\n\nfiltered_usage AS (\n  SELECT\n    u.workspace_id,\n    u.usage_metadata.cluster_id,\n    u.usage_quantity,\n    u.sku_name\n  FROM\n    system.billing.usage u\n  WHERE\n    u.billing_origin_product = 'ALL_PURPOSE'\n    AND u.usage_metadata.node_type != 'SERVERLESS'\n    AND u.usage_date BETWEEN :date_range.min AND :date_range.max\n    AND (:workspace_ids = Array('All') OR array_contains(:workspace_ids, u.workspace_id))\n),\n\nlatest_cluster_info AS (\n  SELECT\n    c.cluster_id,\n    c.cluster_name,\n    c.owned_by,\n    c.dbr_version,\n    c.change_time\n  FROM\n    system.compute.clusters c\n  JOIN latest_cluster_versions lcv\n    ON c.cluster_id = lcv.cluster_id\n    AND c.change_time = lcv.latest_change_time\n  WHERE\n    :dbr_versions = ARRAY('All') \n    OR (\n      regexp_extract(c.dbr_version, '(?<!\\\\d)(\\\\d{1,2}\\\\.\\\\d)(?!\\\\d)', 0) IS NOT NULL AND\n      array_contains(:dbr_versions, regexp_extract(c.dbr_version, '(?<!\\\\d)(\\\\d{1,2}\\\\.\\\\d)(?!\\\\d)', 0))\n    )\n),\n\nprice_lookup AS (\n  SELECT \n    sku_name, \n    pricing.effective_list.default AS price_per_dbu\n  FROM \n    system.billing.list_prices\n  WHERE \n    price_end_time IS NULL\n),\n\ncombined AS (\n  SELECT\n    u.workspace_id,\n    u.cluster_id,\n    c.cluster_name,\n    c.owned_by,\n    TRY_CAST(regexp_extract(c.dbr_version, '(?<!\\\\d)(\\\\d{1,2}\\\\.\\\\d)(?!\\\\d)', 0) AS DOUBLE) AS dbr_version,\n    u.usage_quantity * p.price_per_dbu AS cost\n  FROM\n    filtered_usage u\n  JOIN latest_cluster_info c ON u.cluster_id = c.cluster_id\n  JOIN price_lookup p ON u.sku_name = p.sku_name\n),\n\naggregated AS (\n  SELECT\n    workspace_id,\n    cluster_id,\n    cluster_name,\n    owned_by,\n    combined.dbr_version,\n    SUM(cost) AS total_cost,\n    MAX(COALESCE(ds.is_lts, FALSE)) AS is_lts,\n    MAX(CASE \n      WHEN ds.dbr_version IS NOT NULL AND CURRENT_DATE <= ds.support_until THEN TRUE \n      ELSE FALSE \n    END) AS is_supported\n  FROM\n    combined\n  LEFT JOIN dbr_support_matrix ds \n    ON combined.dbr_version = ds.dbr_version\n  GROUP BY\n    workspace_id, cluster_id, cluster_name, owned_by, combined.dbr_version\n)\n\nSELECT \n  workspace_id,\n  cluster_id,\n  cluster_name,\n  owned_by,\n  dbr_version,\n  is_lts,\n  is_supported,\n  total_cost\nFROM\n  aggregated\nORDER BY\n  total_cost DESC;\n","parameters":[{"displayName":"workspace_ids","keyword":"workspace_ids","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"All"}]}}},{"displayName":"date_range","keyword":"date_range","dataType":"DATE","complexType":"RANGE","defaultSelection":{"range":{"dataType":"DATE","min":{"value":"2025-04-01T00:00:00.000"},"max":{"value":"2025-04-30T23:59:59.999"}}}},{"displayName":"dbr_versions","keyword":"dbr_versions","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"All"}]}}}]}],"pages":[{"name":"947c00d1","displayName":"Jobs","layout":[{"widget":{"name":"6cf905ef","queries":[{"name":"dashboards/01f013d1c2c91a3a9fc6aa48a6813b56/datasets/01f013d1c2ca10999a175b9e2c94c0d7_workspace_id","query":{"datasetName":"965bfd51","fields":[{"name":"workspace_id","expression":"`workspace_id`"},{"name":"workspace_id_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01f013d1c2c91a3a9fc6aa48a6813b56/datasets/01f013d1c2ca10aeaef8189dc07ef229_workspace_ids","query":{"datasetName":"f3d492f2","parameters":[{"name":"workspace_ids","keyword":"workspace_ids"}],"disaggregated":false}},{"name":"parameter_dashboards/01f013d1c2c91a3a9fc6aa48a6813b56/datasets/01f013d1c2ca10c3bcef736594dfba2b_workspace_ids","query":{"datasetName":"f708f193","parameters":[{"name":"workspace_ids","keyword":"workspace_ids"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"workspace_id","displayName":"workspace_id","queryName":"dashboards/01f013d1c2c91a3a9fc6aa48a6813b56/datasets/01f013d1c2ca10999a175b9e2c94c0d7_workspace_id"},{"parameterName":"workspace_ids","queryName":"parameter_dashboards/01f013d1c2c91a3a9fc6aa48a6813b56/datasets/01f013d1c2ca10aeaef8189dc07ef229_workspace_ids"},{"parameterName":"workspace_ids","queryName":"parameter_dashboards/01f013d1c2c91a3a9fc6aa48a6813b56/datasets/01f013d1c2ca10c3bcef736594dfba2b_workspace_ids"}]},"frame":{"showTitle":true,"title":"Workspace","headerAlignment":"left"}}},"position":{"x":0,"y":5,"width":2,"height":1}},{"widget":{"name":"d464a1b2","queries":[{"name":"main_query","query":{"datasetName":"f3d492f2","fields":[{"name":"sum(annualized_cost)","expression":"SUM(`annualized_cost`)"},{"name":"is_supported","expression":"`is_supported`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"pie","encodings":{"angle":{"fieldName":"sum(annualized_cost)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"Annualized Cost"},"color":{"fieldName":"is_supported","scale":{"type":"categorical","mappings":[{"value":true,"color":"#00A972"},{"value":false,"color":"#ff1c04"}]},"legend":{"hideTitle":true,"hide":true,"title":"Supported"},"displayName":"Supported"}},"frame":{"showTitle":true,"showDescription":false,"title":"Annualized Spend by Support Status"}}},"position":{"x":0,"y":13,"width":3,"height":6}},{"widget":{"name":"db11ebca","queries":[{"name":"main_query","query":{"datasetName":"f3d492f2","fields":[{"name":"sum(job_count)","expression":"SUM(`job_count`)"}],"filters":[{"expression":"`is_supported` IN (FALSE)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"sum(job_count)","style":{"bold":true,"color":"#f50000","rules":[{"condition":{"operator":">="},"color":"#00A972"}]},"displayName":"Sum of job_count"}},"frame":{"showTitle":true,"title":"Jobs Running End-of-Support DBR Versions"}}},"position":{"x":4,"y":6,"width":2,"height":3}},{"widget":{"name":"11201a21","queries":[{"name":"main_query","query":{"datasetName":"f708f193","fields":[{"name":"workspace_id","expression":"`workspace_id`"},{"name":"job_id","expression":"`job_id`"},{"name":"dbr_versions","expression":"`dbr_versions`"},{"name":"total_cost","expression":"`total_cost`"},{"name":"run_identities","expression":"`run_identities`"},{"name":"is_lts","expression":"`is_lts`"},{"name":"is_supported","expression":"`is_supported`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"workspace_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":0,"title":"workspace_id","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"is_lts","fn":"=","literal":"false"},"value":{"foregroundColor":"#FFAB00"}},{"if":{"column":"is_supported","fn":"=","literal":"true"},"value":{"foregroundColor":"#00A972"}},{"if":{"column":"is_supported","fn":"=","literal":"false"},"value":{"foregroundColor":"#ff1800"}}]},"displayName":"workspace_id"},{"fieldName":"job_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":1,"title":"job_id","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"is_lts","fn":"=","literal":"false"},"value":{"foregroundColor":"#FFAB00"}},{"if":{"column":"is_supported","fn":"=","literal":"true"},"value":{"foregroundColor":"#00A972"}},{"if":{"column":"is_supported","fn":"=","literal":"false"},"value":{"foregroundColor":"#ff1800"}}]},"displayName":"job_id"},{"fieldName":"dbr_versions","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"complex","displayAs":"string","visible":true,"order":3,"title":"RuntimeVersions","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"is_lts","fn":"=","literal":"false"},"value":{"foregroundColor":"#FFAB00"}},{"if":{"column":"is_supported","fn":"=","literal":"true"},"value":{"foregroundColor":"#00A972"}},{"if":{"column":"is_supported","fn":"=","literal":"false"},"value":{"foregroundColor":"#ff1800"}}]},"displayName":"dbr_versions"},{"fieldName":"total_cost","numberFormat":"$0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"decimal","displayAs":"number","visible":true,"order":4,"title":"MonthlyJobCost","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"is_lts","fn":"=","literal":"false"},"value":{"foregroundColor":"#FFAB00"}},{"if":{"column":"is_supported","fn":"=","literal":"true"},"value":{"foregroundColor":"#00A972"}},{"if":{"column":"is_supported","fn":"=","literal":"false"},"value":{"foregroundColor":"#FF3621"}}]},"description":"Only take into account $DBU spend and are estimates.","displayName":"total_cost"},{"fieldName":"run_identities","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"complex","displayAs":"string","visible":true,"order":5,"title":"RunIdentities","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"description":"Contains run identities across all job runs from the past month.","cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"is_lts","fn":"=","literal":"false"},"value":{"foregroundColor":"#FFAB00"}},{"if":{"column":"is_supported","fn":"=","literal":"true"},"value":{"foregroundColor":"#00A972"}},{"if":{"column":"is_supported","fn":"=","literal":"false"},"value":{"foregroundColor":"#ff1800"}}]},"displayName":"run_identities"}]},"invisibleColumns":[{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"is_supported","type":"boolean","displayAs":"boolean","order":2,"title":"is_supported","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"is_lts","type":"boolean","displayAs":"boolean","order":6,"title":"is_lts","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false}],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":true,"frame":{"showTitle":true,"title":"Full Job Breakdown","showDescription":true,"description":"Colors indicate version status: Yellow for minor releases, Green for supported LTS versions, Red for LTS versions past end-of-support."}}},"position":{"x":0,"y":19,"width":6,"height":7}},{"widget":{"name":"7e03fa1a","queries":[{"name":"dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc115d48eeb195ae0766580_dbr_version","query":{"datasetName":"196e0923","fields":[{"name":"dbr_version","expression":"`dbr_version`"},{"name":"dbr_version_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc1167a8868c436d6d7e06d_dbr_versions","query":{"datasetName":"f3d492f2","parameters":[{"name":"dbr_versions","keyword":"dbr_versions"}],"disaggregated":false}},{"name":"parameter_dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc1169abfa8dcdd1908384e_dbr_versions","query":{"datasetName":"f708f193","parameters":[{"name":"dbr_versions","keyword":"dbr_versions"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"dbr_version","displayName":"dbr_version","queryName":"dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc115d48eeb195ae0766580_dbr_version"},{"parameterName":"dbr_versions","queryName":"parameter_dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc1167a8868c436d6d7e06d_dbr_versions"},{"parameterName":"dbr_versions","queryName":"parameter_dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc1169abfa8dcdd1908384e_dbr_versions"}]},"frame":{"showTitle":true,"title":"DBR Version"}}},"position":{"x":2,"y":5,"width":2,"height":1}},{"widget":{"name":"4f24af61","textbox_spec":"# Databricks Runtime Deprecation Impact — Jobs\n\nThis view focuses on **scheduled and production Jobs**, analyzing the past 30 days of compute usage to surface DBR versions approaching **end-of-support** or **deprecated status**.\n\nData is sourced from:\n- `system.compute.clusters`\n- `system.billing.usage`\n- `system.billing.list_prices`\n\nYou can explore the DBR landscape across **automated jobs**, their associated users (`run_as` identities), and cost profiles to prioritize necessary upgrades.\n\n"},"position":{"x":0,"y":0,"width":6,"height":5}},{"widget":{"name":"8abf2c75","queries":[{"name":"main_query","query":{"datasetName":"f3d492f2","fields":[{"name":"avg(percentage_spend)","expression":"AVG(`percentage_spend`)"}],"filters":[{"expression":"`is_supported` IN (FALSE)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"avg(percentage_spend)","format":{"type":"number-percent","decimalPlaces":{"type":"max","places":2}},"style":{"color":"#FF3621","bold":true,"rules":[{"condition":{"operator":"<=","operand":{"type":"data-value","value":"0.05"}},"color":"#00A972","bold":true},{"condition":{"operator":"<=","operand":{"type":"data-value","value":"0.10"}},"color":"#99DDB4","bold":true},{"condition":{"operator":">","operand":{"type":"data-value","value":"0.10"}},"color":"#FF3621","bold":true}]},"displayName":"Average percentage_spend"}},"frame":{"showTitle":true,"title":"Percentage of Legacy Jobs","showDescription":true,"description":"Approximated from system.billing.list_prices"}}},"position":{"x":2,"y":6,"width":2,"height":3}},{"widget":{"name":"b80ea92d","queries":[{"name":"main_query","query":{"datasetName":"f3d492f2","fields":[{"name":"sum(annualized_cost)","expression":"SUM(`annualized_cost`)"}],"filters":[{"expression":"`is_supported` IN (FALSE)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"sum(annualized_cost)","format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"style":{"color":"#FF3621","bold":true},"displayName":"Sum of annualized_cost"}},"frame":{"showTitle":true,"title":"Annualized Legacy Jobs Revenue","showDescription":true,"description":"Approximated from system.billing.list_prices"}}},"position":{"x":0,"y":6,"width":2,"height":3}},{"widget":{"name":"2c157daa","queries":[{"name":"main_query","query":{"datasetName":"f3d492f2","fields":[{"name":"dbr_version","expression":"`dbr_version`"},{"name":"sum(job_count)","expression":"SUM(`job_count`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"dbr_version","scale":{"type":"categorical"},"displayName":"DBR Version"},"y":{"fieldName":"sum(job_count)","scale":{"type":"quantitative"},"axis":{"hideTitle":true},"displayName":"Sum of job_count"},"color":{"fieldName":"dbr_version","scale":{"type":"quantitative","colorRamp":{"mode":"scheme","scheme":"redyellowblue"}},"legend":{"hide":true},"displayName":"dbr_version"}},"frame":{"showTitle":true,"title":"Job Count Per DBR Version"}}},"position":{"x":3,"y":9,"width":3,"height":10}},{"widget":{"name":"16eba52d","textbox_spec":"> **Note:** Requires system tables to be enabled and a Unity Catalog-enabled workspace.  \n> Financial values shown are **estimates** and may not reflect actual billing. This dashboard is not officially supported by Databricks.\n"},"position":{"x":0,"y":26,"width":6,"height":2}},{"widget":{"name":"f17caca3","queries":[{"name":"parameter_dashboards/01f0213ccf881cdf866d55c55a7ab45b/datasets/01f0213ccf89185dac170c9307fa62d7_parameter","query":{"datasetName":"f3d492f2","parameters":[{"name":"parameter","keyword":"parameter"}],"disaggregated":false}},{"name":"parameter_dashboards/01f0213ccf881cdf866d55c55a7ab45b/datasets/01f0213ccf891885bf1503acd55be869_date_range","query":{"datasetName":"f708f193","parameters":[{"name":"date_range","keyword":"date_range"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-range-picker","encodings":{"fields":[{"parameterName":"parameter","queryName":"parameter_dashboards/01f0213ccf881cdf866d55c55a7ab45b/datasets/01f0213ccf89185dac170c9307fa62d7_parameter"},{"parameterName":"date_range","queryName":"parameter_dashboards/01f0213ccf881cdf866d55c55a7ab45b/datasets/01f0213ccf891885bf1503acd55be869_date_range"}]},"selection":{"defaultSelection":{"range":{"dataType":"DATE","min":{"value":"now-30d/d"},"max":{"value":"now/d"}}}},"frame":{"showTitle":true,"title":"Date Range"}}},"position":{"x":4,"y":5,"width":2,"height":1}},{"widget":{"name":"8c87e684","queries":[{"name":"main_query","query":{"datasetName":"3de9e092","fields":[{"name":"dbr_version","expression":"`dbr_version`"},{"name":"support_until","expression":"`support_until`"},{"name":"is_supported","expression":"`is_supported`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"dbr_version","numberFormat":"","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"decimal","displayAs":"number","visible":true,"order":100000,"title":"DBR Version","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"is_supported","fn":"=","literal":"true"},"value":{"foregroundColor":"#00A972"}},{"if":{"column":"is_supported","fn":"=","literal":"false"},"value":{"foregroundColor":"#FF3621"}}]},"displayName":"dbr_version"},{"fieldName":"support_until","dateTimeFormat":"YYYY-MM-DD","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"date","displayAs":"datetime","visible":true,"order":100001,"title":"End of Support Date","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"is_supported","fn":"=","literal":"true"},"value":{"foregroundColor":"#00A972"}},{"if":{"column":"is_supported","fn":"=","literal":"false"},"value":{"foregroundColor":"#FF3621"}}]},"displayName":"support_until"}]},"invisibleColumns":[{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"is_supported","type":"boolean","displayAs":"boolean","order":100002,"title":"is_supported","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false}],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":false,"frame":{"showTitle":true,"title":"DBR LTS Support Dates"}}},"position":{"x":0,"y":9,"width":3,"height":4}}]},{"name":"b07e7319","displayName":"All-Purpose Clusters","layout":[{"widget":{"name":"fcaba801","textbox_spec":"# Databricks Runtime Deprecation Impact — All-Purpose Clusters\n\nThis view analyzes **All-Purpose compute usage** over the past 30 days to identify clusters impacted by Databricks Runtime (DBR) **deprecations or end-of-support timelines**.\n\nData is sourced from:\n- `system.compute.clusters`\n- `system.billing.usage`\n- `system.billing.list_prices`\n\nThe focus is on clusters that are **interactive or development-oriented**, helping admins and platform teams estimate upgrade urgency and associated cost impacts."},"position":{"x":0,"y":0,"width":6,"height":5}},{"widget":{"name":"88ecdc99","textbox_spec":"> **Note:** Requires system tables to be enabled and a Unity Catalog-enabled workspace.  \n> Financial values shown are **estimates** and may not reflect actual billing. This dashboard is not officially supported by Databricks.\n"},"position":{"x":0,"y":26,"width":6,"height":2}},{"widget":{"name":"2a00a8bc","queries":[{"name":"dashboards/01f013d1c2c91a3a9fc6aa48a6813b56/datasets/01f013d1c2ca10999a175b9e2c94c0d7_workspace_id","query":{"datasetName":"965bfd51","fields":[{"name":"workspace_id","expression":"`workspace_id`"},{"name":"workspace_id_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01f013d1c2c91a3a9fc6aa48a6813b56/datasets/01f0156a463f13b0a7f6ae35e112197c_workspace_ids","query":{"datasetName":"012bb193","parameters":[{"name":"workspace_ids","keyword":"workspace_ids"}],"disaggregated":false}},{"name":"parameter_dashboards/01f013d1c2c91a3a9fc6aa48a6813b56/datasets/01f01569cc9b1bd68d8b8595dbd5708b_workspace_ids","query":{"datasetName":"9b35fba1","parameters":[{"name":"workspace_ids","keyword":"workspace_ids"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"workspace_id","displayName":"workspace_id","queryName":"dashboards/01f013d1c2c91a3a9fc6aa48a6813b56/datasets/01f013d1c2ca10999a175b9e2c94c0d7_workspace_id"},{"parameterName":"workspace_ids","queryName":"parameter_dashboards/01f013d1c2c91a3a9fc6aa48a6813b56/datasets/01f0156a463f13b0a7f6ae35e112197c_workspace_ids"},{"parameterName":"workspace_ids","queryName":"parameter_dashboards/01f013d1c2c91a3a9fc6aa48a6813b56/datasets/01f01569cc9b1bd68d8b8595dbd5708b_workspace_ids"}]},"frame":{"showTitle":true,"title":"Workspace","headerAlignment":"left"}}},"position":{"x":0,"y":5,"width":2,"height":1}},{"widget":{"name":"a369d104","queries":[{"name":"dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc115d48eeb195ae0766580_dbr_version","query":{"datasetName":"196e0923","fields":[{"name":"dbr_version","expression":"`dbr_version`"},{"name":"dbr_version_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc116b6bbdf706c390ff108_dbr_versions","query":{"datasetName":"012bb193","parameters":[{"name":"dbr_versions","keyword":"dbr_versions"}],"disaggregated":false}},{"name":"parameter_dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc116d29d5d37f7f41f0c14_dbr_versions","query":{"datasetName":"9b35fba1","parameters":[{"name":"dbr_versions","keyword":"dbr_versions"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"dbr_version","displayName":"dbr_version","queryName":"dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc115d48eeb195ae0766580_dbr_version"},{"parameterName":"dbr_versions","queryName":"parameter_dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc116b6bbdf706c390ff108_dbr_versions"},{"parameterName":"dbr_versions","queryName":"parameter_dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc116d29d5d37f7f41f0c14_dbr_versions"}]},"frame":{"showTitle":true,"title":"DBR Version"}}},"position":{"x":2,"y":5,"width":2,"height":1}},{"widget":{"name":"326cd782","queries":[{"name":"main_query","query":{"datasetName":"012bb193","fields":[{"name":"sum(annualized_cost)","expression":"SUM(`annualized_cost`)"}],"filters":[{"expression":"`is_supported` IN (FALSE)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"sum(annualized_cost)","format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"style":{"color":"#FF3621","bold":true},"displayName":"Sum of annualized_cost"}},"frame":{"showTitle":true,"title":"Annualized Legacy Clusters Revenue","showDescription":true,"description":"Approximated from system.billing.list_prices"}}},"position":{"x":0,"y":6,"width":2,"height":3}},{"widget":{"name":"e62478d2","queries":[{"name":"main_query","query":{"datasetName":"012bb193","fields":[{"name":"avg(percentage_spend)","expression":"AVG(`percentage_spend`)"}],"filters":[{"expression":"`is_supported` IN (FALSE)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"avg(percentage_spend)","format":{"type":"number-percent","decimalPlaces":{"type":"max","places":2}},"style":{"color":"#FF3621","bold":true,"rules":[{"condition":{"operator":"<=","operand":{"type":"data-value","value":"0.05"}},"color":"#00A972","bold":true},{"condition":{"operator":"<=","operand":{"type":"data-value","value":"0.10"}},"color":"#99DDB4","bold":true},{"condition":{"operator":">","operand":{"type":"data-value","value":"0.10"}},"color":"#FF3621","bold":true}]},"displayName":"Average percentage_spend"}},"frame":{"showTitle":true,"title":"Percentage of Legacy Clusters","showDescription":true,"description":"Approximated from system.billing.list_prices"}}},"position":{"x":2,"y":6,"width":2,"height":3}},{"widget":{"name":"557b45fb","queries":[{"name":"main_query","query":{"datasetName":"012bb193","fields":[{"name":"sum(cluster_count)","expression":"SUM(`cluster_count`)"}],"filters":[{"expression":"`is_supported` IN (FALSE)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"sum(cluster_count)","style":{"bold":true,"color":"#f50000","rules":[{"condition":{"operator":">="},"color":"#00A972"}]},"displayName":"Sum of cluster_count"}},"frame":{"showTitle":true,"title":"Clusters Running End-of-Support DBR Versions"}}},"position":{"x":4,"y":6,"width":2,"height":3}},{"widget":{"name":"42bdeb1e","queries":[{"name":"main_query","query":{"datasetName":"012bb193","fields":[{"name":"sum(annualized_cost)","expression":"SUM(`annualized_cost`)"},{"name":"is_supported","expression":"`is_supported`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"pie","encodings":{"angle":{"fieldName":"sum(annualized_cost)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"Annualized Cost"},"color":{"fieldName":"is_supported","scale":{"type":"categorical","mappings":[{"value":true,"color":"#00A972"},{"value":false,"color":"#ff1c04"}]},"legend":{"hideTitle":true,"hide":true,"title":"Supported"},"displayName":"Supported"}},"frame":{"showTitle":true,"showDescription":false,"title":"Annualized Spend by Support Status"}}},"position":{"x":0,"y":13,"width":3,"height":6}},{"widget":{"name":"7809a4b6","queries":[{"name":"main_query","query":{"datasetName":"012bb193","fields":[{"name":"dbr_version","expression":"`dbr_version`"},{"name":"sum(cluster_count)","expression":"SUM(`cluster_count`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"dbr_version","scale":{"type":"categorical"},"displayName":"DBR Version"},"y":{"fieldName":"sum(cluster_count)","scale":{"type":"quantitative"},"axis":{"hideTitle":true},"displayName":"Sum of cluster_count"},"color":{"fieldName":"dbr_version","scale":{"type":"quantitative","colorRamp":{"mode":"scheme","scheme":"redyellowblue"}},"legend":{"hide":true},"displayName":"dbr_version"}},"frame":{"showTitle":true,"title":"Cluster Count Per DBR Version"}}},"position":{"x":3,"y":9,"width":3,"height":10}},{"widget":{"name":"422ef59b","queries":[{"name":"main_query","query":{"datasetName":"9b35fba1","fields":[{"name":"workspace_id","expression":"`workspace_id`"},{"name":"cluster_id","expression":"`cluster_id`"},{"name":"cluster_name","expression":"`cluster_name`"},{"name":"dbr_version","expression":"`dbr_version`"},{"name":"total_cost","expression":"`total_cost`"},{"name":"owned_by","expression":"`owned_by`"},{"name":"is_lts","expression":"`is_lts`"},{"name":"is_supported","expression":"`is_supported`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"workspace_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":1,"title":"workspace_id","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"is_lts","fn":"=","literal":"false"},"value":{"foregroundColor":"#FFAB00"}},{"if":{"column":"is_supported","fn":"=","literal":"true"},"value":{"foregroundColor":"#00A972"}},{"if":{"column":"is_supported","fn":"=","literal":"false"},"value":{"foregroundColor":"#ff1800"}}]},"displayName":"workspace_id"},{"fieldName":"cluster_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":2,"title":"cluster_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"is_lts","fn":"=","literal":"false"},"value":{"foregroundColor":"#FFAB00"}},{"if":{"column":"is_supported","fn":"=","literal":"false"},"value":{"foregroundColor":"#FF3621"}},{"if":{"column":"is_supported","fn":"=","literal":"true"},"value":{"foregroundColor":"#00A972"}}]},"displayName":"cluster_id"},{"fieldName":"cluster_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":3,"title":"cluster_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"is_lts","fn":"=","literal":"false"},"value":{"foregroundColor":"#FFAB00"}},{"if":{"column":"is_supported","fn":"=","literal":"false"},"value":{"foregroundColor":"#FF3621"}},{"if":{"column":"is_supported","fn":"=","literal":"true"},"value":{"foregroundColor":"#00A972"}}]},"displayName":"cluster_name"},{"fieldName":"dbr_version","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"string","visible":true,"order":4,"title":"RuntimeVersion","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"is_lts","fn":"=","literal":"false"},"value":{"foregroundColor":"#FFAB00"}},{"if":{"column":"is_supported","fn":"=","literal":"false"},"value":{"foregroundColor":"#FF3621"}},{"if":{"column":"is_supported","fn":"=","literal":"true"},"value":{"foregroundColor":"#00A972"}}]},"displayName":"dbr_version"},{"fieldName":"total_cost","numberFormat":"$0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"decimal","displayAs":"number","visible":true,"order":5,"title":"MonthlyJobCost","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"is_lts","fn":"=","literal":"false"},"value":{"foregroundColor":"#FFAB00"}},{"if":{"column":"is_supported","fn":"=","literal":"true"},"value":{"foregroundColor":"#00A972"}},{"if":{"column":"is_supported","fn":"=","literal":"false"},"value":{"foregroundColor":"#FF3621"}}]},"description":"Only take into account $DBU spend and are estimates.","displayName":"total_cost"},{"fieldName":"owned_by","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":6,"title":"OwnedBy","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"is_lts","fn":"=","literal":"false"},"value":{"foregroundColor":"#FFAB00"}},{"if":{"column":"is_supported","fn":"=","literal":"false"},"value":{"foregroundColor":"#FF3621"}},{"if":{"column":"is_supported","fn":"=","literal":"true"},"value":{"foregroundColor":"#00A972"}}]},"displayName":"owned_by"}]},"invisibleColumns":[{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"is_supported","type":"boolean","displayAs":"boolean","order":0,"title":"is_supported","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"is_lts","type":"boolean","displayAs":"boolean","order":7,"title":"is_lts","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false}],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":true,"frame":{"showTitle":true,"title":"Full All-Purpose Cluster Breakdown","showDescription":true,"description":"Colors indicate version status: Yellow for minor releases, Green for supported LTS versions, Red for LTS versions past end-of-support."}}},"position":{"x":0,"y":19,"width":6,"height":7}},{"widget":{"name":"a145e174","queries":[{"name":"parameter_dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc116b6bbdf706c390ff108_date_range","query":{"datasetName":"012bb193","parameters":[{"name":"date_range","keyword":"date_range"}],"disaggregated":false}},{"name":"parameter_dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc116d29d5d37f7f41f0c14_date_range","query":{"datasetName":"9b35fba1","parameters":[{"name":"date_range","keyword":"date_range"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-range-picker","encodings":{"fields":[{"parameterName":"date_range","queryName":"parameter_dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc116b6bbdf706c390ff108_date_range"},{"parameterName":"date_range","queryName":"parameter_dashboards/01f0196b3bc01e46878116b346a3700b/datasets/01f0196b3bc116d29d5d37f7f41f0c14_date_range"}]},"frame":{"showTitle":true,"title":"Date Range"},"selection":{"defaultSelection":{"range":{"dataType":"DATE","min":{"value":"now-30d/d"},"max":{"value":"now/d"}}}}}},"position":{"x":4,"y":5,"width":2,"height":1}},{"widget":{"name":"b98d383b","queries":[{"name":"main_query","query":{"datasetName":"3de9e092","fields":[{"name":"dbr_version","expression":"`dbr_version`"},{"name":"support_until","expression":"`support_until`"},{"name":"is_supported","expression":"`is_supported`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"dbr_version","numberFormat":"","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"decimal","displayAs":"number","visible":true,"order":100000,"title":"DBR Version","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"is_supported","fn":"=","literal":"true"},"value":{"foregroundColor":"#00A972"}},{"if":{"column":"is_supported","fn":"=","literal":"false"},"value":{"foregroundColor":"#FF3621"}}]},"displayName":"dbr_version"},{"fieldName":"support_until","dateTimeFormat":"YYYY-MM-DD","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"date","displayAs":"datetime","visible":true,"order":100001,"title":"End of Support Date","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"is_supported","fn":"=","literal":"true"},"value":{"foregroundColor":"#00A972"}},{"if":{"column":"is_supported","fn":"=","literal":"false"},"value":{"foregroundColor":"#FF3621"}}]},"displayName":"support_until"}]},"invisibleColumns":[{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"is_supported","type":"boolean","displayAs":"boolean","order":100002,"title":"is_supported","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false}],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":false,"frame":{"showTitle":true,"title":"DBR LTS Support Dates"}}},"position":{"x":0,"y":9,"width":3,"height":4}}]}]}